<!DOCTYPE html>
<html> 
<head> 
	<meta http-equiv="content-type" content="text/html; charset=UTF-8"> 
	<title>OptimiSer</title> 
	<link rel="stylesheet" type="text/css" href="tabstyles.css">
	<link rel="stylesheet" type="text/css" href="main.css">

	<script src="https://maps.googleapis.com/maps/api/js?v=3.exp&signed_in=true&libraries=places"></script>
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
	<script type="text/javascript">
		$(document).ready(function(){
			var leftTab = $("#leftButton");
			var rightTab = $("#rightButton");
			leftTab.addClass("selected");
			leftTab.bind("click", function(){
				leftTab.addClass("selected");
				rightTab.removeClass("selected");

				//TODO: change heatmap
			});

			rightTab.bind("click", function(){
				rightTab.addClass("selected");
				leftTab.removeClass("selected");

				//TODO: change heatmap
			});
		});
	</script>
	<script type="text/javascript">
      function initialize() {
      	var markers = [];
        var mapOptions = {
          center: { lat: 42.359254, lng: -71.093134},
          zoom: 17
        };

        var map = new google.maps.Map(document.getElementById('map'),
            mapOptions);

        var input = (document.getElementById('pac-input'));
		map.controls[google.maps.ControlPosition.TOP_LEFT].push(input); //link google maps search function to the input field
		var searchBox = new google.maps.places.SearchBox((input));

		google.maps.event.addListener(searchBox, 'places_changed', function() {
		    var places = searchBox.getPlaces();

		    if (places.length == 0) {
		      return;
		    }
		    for (var i = 0, marker; marker = markers[i]; i++) {
		      marker.setMap(null);
		    }

		    // For each place, get the icon, place name, and location.
		    markers = [];
		    var bounds = new google.maps.LatLngBounds();
		    for (var i = 0, place; place = places[i]; i++) {
		      var image = {
		        url: place.icon,
		        size: new google.maps.Size(71, 71),
		        origin: new google.maps.Point(0, 0),
		        anchor: new google.maps.Point(17, 34),
		        scaledSize: new google.maps.Size(25, 25)
		      };

		      // Create a marker for each place.
		      var marker = new google.maps.Marker({
		        map: map,
		        icon: image,
		        title: place.name,
		        position: place.geometry.location
		      });

		      markers.push(marker);

		      bounds.extend(place.geometry.location);
		    }

		    map.fitBounds(bounds);
		});

		google.maps.event.addListener(map, 'bounds_changed', function() {
			var bounds = map.getBounds();
			searchBox.setBounds(bounds);
		});

      }
      google.maps.event.addDomListener(window, 'load', initialize);
    </script>
</head> 
<body>
	<div class="Tabs segmentedControlBase" id="buttonContainer">
		<div class="button segmentedControl leftEnd tab" id="leftButton">All Rider History</div>
    	<div class="button segmentedControl rightEnd tab" id="rightButton">My Rider History</div>
	</div>
	<div class="rounded">
		<input id="pac-input" class="controls" type="text" placeholder="Search Box">
		<div id="map"></div>
	</div>
</body>
</html>